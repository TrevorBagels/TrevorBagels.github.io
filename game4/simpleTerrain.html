<canvas id="c" width="300" height="300"></canvas>
<style>
  body {
    background: black;
  }
  canvas {
    background: blue;
  }
</style>
<script>
  var steepness = 3;
  var size = 45;
  var cells = [];
  //returns index of cells[] from a 2d vector. (1D arrays are faster than 2D arrays)
  function CINDX(x, y) {
    return x * size + y;
  }
  function Rand(min, max) {
    return Math.floor(min + Math.random() * (max + 1 - min));
  }
  function Clamp(or, min, max) {
    if (or < min) or = min;
    if (or > max) or = max;
    return or;
  }
  var cnvs = document.getElementById("c");
  var ctx = cnvs.getContext("2d");
  function draw(x, y, h) {
    ctx.fillStyle = "rgb(" + h + ", " + h + ", " + h + ")";
    ctx.fillRect(x * 5, y * 5, 5, 5);
  }
  for (var x = 0; x < size; x++)
    for (var y = 0; y < size; y++) {
      var addedH = Rand(-steepness, steepness);
      var usedH = 50;
      //using a cell below this one
      if (x == 0 && y != 0) usedH = cells[CINDX(x, y - 1)];
      //using a cell to the left of this one
      if (x != 0 && y == 0) usedH = cells[CINDX(x - 1, y)];
      //using the average height of the cells below and to the left of this one
      if (x != 0 && y != 0)
        usedH = (cells[CINDX(x - 1, y)] + cells[CINDX(x, y - 1)]) / 2;
      //calculate the new height and push it to the array
      newH = Clamp(addedH + usedH, 0, 255);
      cells.push(newH);
      //draw the cell
      draw(x, y, newH);
    }
</script>